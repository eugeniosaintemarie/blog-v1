(function(){function n(){let n={};const t=window.location.search.substring(1),o=t.split("&");return o.forEach(t=>{const o=t.split("="),e=o[0],s=o[1]||"";void 0===n[e]?n[e]=s:"string"==typeof n[e]?n[e]=[n[e],s]:n[e].push(s)}),n}const t=function(){const n=window.location.href.split("?")[0];return function(t){const o="string"==typeof t?n+t:n;window.history.replaceState(null,"",o)}}();$(document).ready(function(){function o(){let n=0;u.each(function(t){h.push(n),n+=$(this).find(".item").length}),h.push(n)}function e(n){if(!n)return l;const t=a.filter('[data-encode="'+n+'"]');return 0===t.length?l:t}function s(n){n&&(n.addClass("focus"),r&&!r.is(n)&&r.removeClass("focus"),r=n)}function c(n,o){const c={};if(f.forEach((t,o)=>{t.each(e=>{const s=t.eq(e).data("tags").split(",");n&&!s.includes(n)||(c[o]=c[o]||{},c[o][e]=!0)})}),u.each(n=>{const t=c[n];t?u.eq(n).removeClass("d-none"):u.eq(n).addClass("d-none"),f[n].each(o=>{t&&t[o]?f[n].eq(o).removeClass("d-none"):f[n].eq(o).addClass("d-none")})}),g||(d.removeClass("d-none"),g=!0),o){s(o);const n=o.attr("data-encode");n?t(`?tag=${n}`):t()}else s(e(n))}const i=$(".js-tags"),a=i.find(".tag-button"),l=i.find(".tag-button--all"),d=$(".js-result"),u=d.find("section"),f=[];let r=null;const h=[];let g=!1;u.each(function(){f.push($(this).find(".item"))});const p=n(),m=p.tag;o(),c(m),i.on("click","a",function(){c($(this).data("encode"),$(this))})})})();