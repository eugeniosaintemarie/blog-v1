(function(){function n(){var n,t=0,e={},o=window.location.search.substring(1),a=o.split("&");for(t=0;t<a.length;t++)n=a[t].split("="),void 0===e[n[0]]?e[n[0]]=n[1]:"string"==typeof e[n[0]]?e[n[0]]=[e[n[0]],n[1]]:e[n[0]].push(n[1]);return e}var t,e=(t=window.location.href.split("?")[0],function(n){"string"==typeof n?window.history.replaceState(null,"",t+n):window.history.replaceState(null,"",t)});$(document).ready(function(){function t(){var n,t=0;for(n=0;n<d.length;n++)h.push(t),t+=d.eq(n).find(".item").length;h.push(t)}function o(n){if(!n)return l;var t=r.filter('[data-encode="'+n+'"]');return 0===t.length?l:t}function a(n){n&&(n.addClass("focus"),c&&!c.is(n)&&c.removeClass("focus"),c=n)}function i(n,t){var i,s,r,l,c,h={};for(s=0;s<u.length;s++)for(i=u[s],r=0;r<i.length;r++)if(""===n||void 0===n)h[s]||(h[s]={}),h[s][r]=!0;else{var v=i.eq(r).data("tags").split(",");for(l=0;l<v.length;l++)if(v[l]===n){h[s]||(h[s]={}),h[s][r]=!0;break}}for(s=0;s<u.length;s++)for(h[s]&&d.eq(s).removeClass("d-none"),h[s]||d.eq(s).addClass("d-none"),r=0;r<u[s].length;r++)h[s]&&h[s][r]?u[s].eq(r).removeClass("d-none"):u[s].eq(r).addClass("d-none");g||(f.removeClass("d-none"),g=!0),t?(a(t),c=t.attr("data-encode"),""===c||"string"!=typeof c?e():e("?tag="+c)):a(o(n))}var s=$(".js-tags"),r=s.find(".tag-button"),l=s.find(".tag-button--all"),f=$(".js-result"),d=f.find("section"),u=[],c=null,h=[],g=!1;d.each(function(){u.push($(this).find(".item"))});var v=n(),p=v.tag;t(),i(p),s.on("click","a",function(){i($(this).data("encode"),$(this))})})})();